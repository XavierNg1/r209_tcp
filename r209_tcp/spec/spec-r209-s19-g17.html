<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Group 17: Proposition de specification de protocole </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
      /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
      a.info {
          /* This is the key. */
          position: relative;
          z-index: 24;
          text-decoration: none;
      }
      a.info:hover {
          z-index: 25;
          color: #FFF; background-color: #900;
      }
      a.info span { display: none; }
      a.info:hover span.info {
          /* The span will display just on :hover state. */
          display: block;
          position: absolute;
          font-size: smaller;
          top: 2em; left: -5em; width: 15em;
          padding: 2px; border: 1px solid #333;
          color: #900; background-color: #EEE;
          text-align: left;
      }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  max-width: 55em;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Types de paquet">
<link href="#rfc.section.3" rel="Chapter" title="3 Format des Paquets">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Acquitement">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Erreur de s&#233;quence">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Demande de connexion">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Erreur de connexion">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Connexion Reussie">
<link href="#rfc.section.3.6" rel="Chapter" title="3.6 Envoie liste des films">
<link href="#rfc.section.3.7" rel="Chapter" title="3.7 Envoie Liste des users">
<link href="#rfc.section.3.8" rel="Chapter" title="3.8 Avertissement Inactivit&#233;">
<link href="#rfc.section.3.9" rel="Chapter" title="3.9 Avertissement SPAM">
<link href="#rfc.section.3.10" rel="Chapter" title="3.10 Demande Acc&#232;s film">
<link href="#rfc.section.3.11" rel="Chapter" title="3.11 Envoie Message de Chat">
<link href="#rfc.section.3.12" rel="Chapter" title="3.12 Quitter la MainRoom">
<link href="#rfc.section.3.13" rel="Chapter" title="3.13 Quitter un film">
<link href="#rfc.section.3.14" rel="Chapter" title="3.14 Message de deconnexion">
<link href="#rfc.section.4" rel="Chapter" title="4 Fiabilit&#233;">
<link href="#rfc.section.5" rel="Chapter" title="5 Exemple de scenario">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Scenario 1(sans erreur): Regarder un film">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Scenario 2(sans erreur): Chat dans une salle">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Scenario 3(sans erreur): Utilisateur inactif Dans la salle principale">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Scenario 4(sans erreur): Envoie de SPAM">
<link href="#rfc.section.5.5" rel="Chapter" title="5.5 Scenario 5(avec erreur) : Quitter l'application">
<link href="#rfc.section.6" rel="Chapter" title="6 Conclusion">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.9.6 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="KADJO MAMI, C. and E. N'GUESSAN" />
  <meta name="dct.identifier" content="urn:ietf:id:Application c2w" />
  <meta name="dct.issued" scheme="ISO8601" content="2019-03-06" />
  <meta name="dct.abstract" content="Ce document presente la specification du protocole de communication utilise au sein de l'application c2w (Chat While Watching); Ce protocole permettra a tous les utilisateurs d'une meme salle (principal ou dee film) de s'echanger des messages." />
  <meta name="description" content="Ce document presente la specification du protocole de communication utilise au sein de l'application c2w (Chat While Watching); Ce protocole permettra a tous les utilisateurs d'une meme salle (principal ou dee film) de s'echanger des messages." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left"></td>
<td class="right">C. KADJO MAMI</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">E. N'GUESSAN</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Telecom Bretagne</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 6, 2019</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Group 17: Proposition de specification de protocole <br />
  <span class="filename">Application c2w</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Ce document presente la specification du protocole de communication utilise au sein de l'application c2w (Chat While Watching); Ce protocole permettra a tous les utilisateurs d'une meme salle (principal ou dee film) de s'echanger des messages.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Types de paquet</a>
</li>
<li>3.   <a href="#rfc.section.3">Format des Paquets</a>
</li>
<ul><li>3.1.   <a href="#rfc.section.3.1">Acquitement</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Erreur de s&#233;quence</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Demande de connexion</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Erreur de connexion</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Connexion Reussie</a>
</li>
<li>3.6.   <a href="#rfc.section.3.6">Envoie liste des films</a>
</li>
<li>3.7.   <a href="#rfc.section.3.7">Envoie Liste des users</a>
</li>
<li>3.8.   <a href="#rfc.section.3.8">Avertissement Inactivit&#233;</a>
</li>
<li>3.9.   <a href="#rfc.section.3.9">Avertissement SPAM</a>
</li>
<li>3.10.   <a href="#rfc.section.3.10">Demande Acc&#232;s film</a>
</li>
<li>3.11.   <a href="#rfc.section.3.11">Envoie Message de Chat</a>
</li>
<li>3.12.   <a href="#rfc.section.3.12">Quitter la MainRoom</a>
</li>
<li>3.13.   <a href="#rfc.section.3.13">Quitter un film</a>
</li>
<li>3.14.   <a href="#rfc.section.3.14">Message de deconnexion</a>
</li>
</ul><li>4.   <a href="#rfc.section.4">Fiabilit&#233;</a>
</li>
<li>5.   <a href="#rfc.section.5">Exemple de scenario</a>
</li>
<ul><li>5.1.   <a href="#rfc.section.5.1">Scenario 1(sans erreur): Regarder un film</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Scenario 2(sans erreur): Chat dans une salle</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Scenario 3(sans erreur): Utilisateur inactif Dans la salle principale</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Scenario 4(sans erreur): Envoie de SPAM</a>
</li>
<li>5.5.   <a href="#rfc.section.5.5">Scenario 5(avec erreur) : Quitter l'application</a>
</li>
</ul><li>6.   <a href="#rfc.section.6">Conclusion</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Dans le cadre de l'application c2w : Chat While Watching, ce document decrit la specification du protocole de communication utilise pour la mise en place de ladite application.  Cette application permet a un utilisateur, apres s'etre connecte, d'acceder a un certains nombres de videos, de pouvoir les regarder d'une part et, d'autre part, de pouvoir echanger des messages avec les utilisateurs se trouvant dans le meme salon.</p>
<p id="rfc.section.1.p.2">Le serveur communiquera avec les utilisateurs aussi bien en utilisant le protocole de transport TCP que le protocole UDP. Les messages seront envoyes sous le format binaire.</p>
<p id="rfc.section.1.p.3">Dans la suite du document nous sp&#233;cifierons le fonctionnement du protocole, les types de messages envoy&#233;s, le format des differents messages et donnerons differents exemples de scenarii pouvant arriver dans l'execution du protocole.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Types de paquet</h1>
<p id="rfc.section.2.p.1">Ce tableau enumere l'ensemble des paquets qui seront utilises au sein de notre systeme.  Leur description se fera dans la suite du document quand ils seront precises leurs formats de paquets.  </p>
<div id="rfc.figure.1"></div>
<div id="type_paquet"></div>
<pre>

    +------+--------------------------+-------------------------------+
    | code |       TypeDePaquet       |      Sens de Transmission     |
    +------+--------------------------+-------------------------------+
    | 0000 |       Acquittement       |     Client &lt;-----&gt; Serveur    |
    | 0001 |   Demande de connexion   |     Client x-----&gt; Serveur    |
    | 0010 |   Erreur de connexion    |     Client &lt;-----x Serveur    |
    | 0011 |     Connexion Reussie    |     Client &lt;-----x Serveur    |
    | 0100 |  Envoi liste des films   |     Client &lt;-----x Serveur    |
    | 0101 |  Envoi liste de users    |     Client &lt;-----x Serveur    |
    | 0110 | Avertissemnt Inactivit&#233;  |     Client &lt;-----x Serveur    |
    | 0111 |    Avertissemnt SPAM     |     Client &lt;-----x Serveur    |
    | 1000 |    Demande acces film    |     Client x-----&gt; Serveur    |
    | 1001 |    Erreur de sequence    |     Client &lt;-----&gt; Serveur    |
    | 1010 |  Envoi message de Chat   |     Client &lt;-----&gt; Serveur    |
    | 1011 |   Quitter la Main room   |     Client x-----&gt; Serveur    |
    | 1100 | Quitter un salon de film |     Client x-----&gt; Serveur    |
    | 1101 |  Message de deconnexion  |     Client &lt;-----x Serveur    |
    |______|__________________________|_______________________________|

  
  </pre>
<p class="figure">Figure 1</p>
<p></p>
<p id="rfc.section.2.p.3">Sens de Transmission </p>
<p></p>

<ol>
<li>Client x-----&gt; Server: Indique une communication du client vers le server</li>
<li>Client &lt;-----x Server: Indique une communication du server vers le client</li>
<li>Client &lt;-----&gt; Server: Indique la possibilit&#233; d'avoir le cas 1. et 2. </li>
</ol>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Format des Paquets</h1>
<p id="rfc.section.3.p.1">Dans la suite nous allons decrire les differents types de paquet present&#233;s ci-dessus, en pr&#233;sentant les diff&#233;rents champs qui les composents La totalit&#233; des paquets partagent au minimun les 3 champs pr&#233;sent&#233; sur la figure 2. Nous eviterons alors les r&#233;p&#233;titions dans la suite.  </p>
<div id="rfc.figure.2"></div>
<div id="ack1"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+      
      </pre>
<p class="figure">Figure 2</p>
<p></p>
<p></p>

<dl>
<dt>Code (4 bits)</dt>
<dd style="margin-left: 8">
<br><br> Cod&#233; sur 4 bits il permet d'identifier les 14 diff&#233;rents types de paquets.  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Sequence (12 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ represente le numero du paquet envoye. Il permet de l'identifier de maniere unique dans le systeme. A chaque nouvel envoi, l'emetteur incremente sa valeur de 1.  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Taille (16 bits)</dt>
<dd style="margin-left: 8">
<br><br> C'est la taille en bit de l'ensemble du message (c'est &#224; dire de tous les champs du paquet reunis).  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Acquitement</h1>
<p id="rfc.section.3.1.p.1">Ce paquet est transmis par le server ou le client pour informer le second acteur de transmission de la reception d'un paquet.  </p>
<div id="rfc.figure.3"></div>
<div id="ack"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </pre>
<p class="figure">Figure 3</p>
<p></p>
<p id="rfc.section.3.1.p.3">Code (4 bits): informant le client qu'il s'agit d'un acquitement. (Voir figure 1) </p>
<p id="rfc.section.3.1.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.1.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Erreur de s&#233;quence</h1>
<p id="rfc.section.3.2.p.1">Ce message est envoye lorsqu'il y a contradiction entre la sequence attendue par le recepteur et celle recue. Dans notre systeme, chaque paquet est identifie de maniere unique par son numero de sequence.  Lorsqu'un recepteur recoit plusieurs fois le meme numero de sequence, il detecte la redondance de message et soumet a l'emetteur cette erreur.  </p>
<div id="rfc.figure.4"></div>
<div id="seq_error"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   
      </pre>
<p class="figure">Figure 4</p>
<p></p>
<p id="rfc.section.3.2.p.3">Code (4 bits): informant le client qu'il s'agit d'une notification d'erreur de sequence. (Voir figure 1) </p>
<p id="rfc.section.3.2.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.2.p.5">Taille (16 bits):Taille totale du paquet.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Demande de connexion</h1>
<p id="rfc.section.3.3.p.1">Ce paquet est le premier envoy&#233; par le client au server pour la demande de connexion.</p>
<div id="rfc.figure.5"></div>
<div id="demande_co"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Temps                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      .                            UserName                           .
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </pre>
<p class="figure">Figure 5</p>
<p></p>
<p id="rfc.section.3.3.p.3">Code (4 bits): informant le server qu'il s'agit d'une demande de connexion &#224; l'application. (Voir figure 1) </p>
<p id="rfc.section.3.3.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.3.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>Temps (32 bits)</dt>
<dd style="margin-left: 8">
<br><br> Temps envoy&#233; par le client &#224; chaque interaction volantaire avec le server: Demande de connection, envoie de message Chat , Quitter un film, Demande Acces film.  Ce temps nous permet de mesurer le temps d'inactivit&#233; d'un client.  Comme pr&#233;snenter dans le scenarion 3 (Voir 5.3) un client inactif pendant 15 min se fera systematiquent deconnecter lorsqu'il est dans la Main Room, les clients dans les salles de film n'etant pas concerner.  Cela devrait permettre l'acces au service &#224; d'autre client.  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>Username (256 bits)</dt>
<dd style="margin-left: 8">
<br> Ce champs contient le Username du demandeur de connexion. Tout les caracteres UTF-8 sont accept&#233;s.  Le Username du client est cod&#233; sur 256 bits et doit respecter certaines contraintes lors de la connexion d'un client.  <ol>
<li>Le username doit pouvoir etre code sur 256 bits</li>
<li>Le Username choisit ne doit pas etre deja utilis&#233;</li>
<li>Le username ne doit pas figur&#233; parmis une liste de username jug&#233;s offenssant Exemple : Hitler, Merde,...</li>
</ol>
<p> </p>
</dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Erreur de connexion</h1>
<p id="rfc.section.3.4.p.1">Paquet envoy&#233; au demandeur de connexion lorsque son username est invalide.</p>
<div id="rfc.figure.6"></div>
<div id="Erreur_co"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      .                        MessageErreur                          .
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </pre>
<p class="figure">Figure 6</p>
<p></p>
<p id="rfc.section.3.4.p.3">Code (4 bits): informant le client qu'il s'agit d'une notification d'erreur de connexion. (Voir figure 1) </p>
<p id="rfc.section.3.4.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.4.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>MessageErreur (1024 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient un message &#224; afficher lors d'une erreur de connexion.  Le contenu du message permettra &#224; l'utilisateur de savoir avec exactitude La cause l'erreur. Le message est encod&#233; en UTF-8.  Suivant l'erreur sur le username le client saura que sont username est deja utilis&#233; , trop long ou n'est pas accept&#233;.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Connexion Reussie</h1>
<p id="rfc.section.3.5.p.1">Ce paquet est transmis par le server &#224; un client lorsque la connexion &#224; l'application est accept&#233;e .</p>
<div id="rfc.figure.7"></div>
<div id="succed_co"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IdUser   |
      +-+-+-+-+-+-+-+
       </pre>
<p class="figure">Figure 7</p>
<p></p>
<p id="rfc.section.3.5.p.3">Code (4 bits): informant le client qu'il s'agit d'une notification de connexion reussie. (Voir figure 1) </p>
<p id="rfc.section.3.5.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.5.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>IdUser (7 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient l'identifiant d'un user connecte.  Code sur 7 bits un IdUser est attribue a chaque client lors de sa connexion et doit permettre son identification sans l'utilisation de son username afin de reduire la taille des paquets de communication. Le nombre maximal de User connect&#233; est 128 </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.6">
<a href="#rfc.section.3.6">3.6.</a> Envoie liste des films</h1>
<p id="rfc.section.3.6.p.1">Ce paquet est transmis au client lors de sa premi&#232;re connexion (sauf ajout de nouveau film) pour ses futures selection de film &#224; regarder.</p>
<div id="rfc.figure.8"></div>
<div id="list_films"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           AdresseIP                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             NumPort           |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
      |                            NomFilm                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           AdresseIP                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             NumPort           |                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
      |                            NomFilm                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      </pre>
<p class="figure">Figure 8</p>
<p></p>
<p id="rfc.section.3.6.p.3">Code (4 bits): informant le client qu'il s'agit de la liste des films disposibles. (Voir figure 1) </p>
<p id="rfc.section.3.6.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.6.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>Adresse IP (32 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ correspond &#224; l'addresse Ip du films situe dans le champ Nomfilm qui suit.  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>NumPort (16 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ correspond au Port utilis&#233; par le film situe dans le champ Nomfilm qui suit.  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>NomFilm (256 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient Le nom d'un film. Tous les carat&#232;res UTF-8 doivent etre accepter et le message codes sur 256 bits.  Le champ Salle (voir 3.10) etant code sur 4 bits l'application doit dispose d'au maximun 15 films, la 16e salle &#233;tant la MainRoom (Salle Principale) </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.7">
<a href="#rfc.section.3.7">3.7.</a> Envoie Liste des users</h1>
<p id="rfc.section.3.7.p.1">Ce paquet est transmis par le server aux differents clients lorsqu'une personne rejoint ou quitte une salle (MainRoom ou Salle de film). Effectuant ainsi la mise &#224; jour des clients pr&#233;sents dans chaque salle</p>
<div id="rfc.figure.9"></div>
<div id="send_user"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IdUser   | Salle |                                         |
      +-+-+-+-+-+-+-+-+-+-+-+      UserName                           .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IdUser   | Salle |                                         |
      +-+-+-+-+-+-+-+-+-+-+-+      UserName                           .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+          
      </pre>
<p class="figure">Figure 9</p>
<p></p>
<p id="rfc.section.3.7.p.3">Code (4 bits): informant le client qu'il s'agit d'une liste de users. (Voir figure 1) </p>
<p id="rfc.section.3.7.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.7.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p id="rfc.section.3.7.p.6">IdUser (7 bits): l'identifiant du user dont le u sername se trouve dans le champ qui suit.  </p>
<p></p>

<dl>
<dt>Salle (4 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ code sur 4 bits contient le numero d'une Salle.  0000 peut etre le numero pour designer la Main Room.  Chaque Film est aussi represent&#233; par sa salle (numero de salle :xxxx !=0000) Le champ salle doit permetre de localiser un client &#224; tout moment.  En d'autre terme chaque un client est lier &#224; une salle qui permet au server de connaitre les destinataires des messages qu'il lui envoie.  </dd>
</dl>

<p> </p>
<p id="rfc.section.3.7.p.8">Username (256 bits): Username d'un client se trouvant dans une salle (MainRoom ,Salle de film). (Voir 3.3) </p>
<h1 id="rfc.section.3.8">
<a href="#rfc.section.3.8">3.8.</a> Avertissement Inactivit&#233;</h1>
<p id="rfc.section.3.8.p.1">Ce paquet est transmis &#224; un client se trouvant dans la MainRoom lorque aucune activit&#233; de sa part n'est detect&#233;es pendant un dur&#233;e de 14 min.</p>
<div id="rfc.figure.10"></div>
<div id="warning_inact"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      .                     AvertissementInactivit&#233;                   .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      </pre>
<p class="figure">Figure 10</p>
<p></p>
<p id="rfc.section.3.8.p.3">Code (4 bits): informant le client qu'il s'agit d'un message d'avertissemnt &#224; afficher. (Voir figure 1) </p>
<p id="rfc.section.3.8.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.8.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>AvertissementInactivite (1024 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient un message avertissant le client qu'il sera deconnect&#233; dans 1 minute parce qu'il est inactif dans la MainRoom. Tous les carat&#232;res UTF-8 doivent etre accepter et le message codes sur 1024 bits Le message doit s'afficher parmis les messages de chat mais etre vu uniquement par le client concerne.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.9">
<a href="#rfc.section.3.9">3.9.</a> Avertissement SPAM</h1>
<p id="rfc.section.3.9.p.1">Ce paquet est transmis &#224; un client se trouvant dans une salle quelconque lorqu'il envoi plusieurs messages sur un delai tr&#232;s court (2 messages en 1s).  Le server identifie ces messages comme des SPAM.  .</p>
<div id="rfc.figure.11"></div>
<div id="warning_spam"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      .                       AvertissementSPAM                       .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+     
      </pre>
<p class="figure">Figure 11</p>
<p></p>
<p id="rfc.section.3.9.p.3">Code (4 bits): informant le client qu'il s'agit d'un message d'avertissemnt &#224; afficher. (Voir figure 1) </p>
<p id="rfc.section.3.9.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.9.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>AvertissementSPAM (1024 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient un message avertissement le client qu'il sera deconnect&#233; dans au prochain avertissement pour envoi repete de message (2 messages par seconde). Tous les carat&#232;res UTF-8 doivent etre accepter et le message codes sur 1024 bits Le message doit s'afficher parmis les messages de chat mais etre vu uniquement par le client concerne.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.10">
<a href="#rfc.section.3.10">3.10.</a> Demande Acc&#232;s film</h1>
<p id="rfc.section.3.10.p.1">Ce paquet est envoy&#233; par un client au server lorsqu'il veut joindre une salle de film.</p>
<div id="rfc.figure.12"></div>
<div id="acess_movie"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Temps                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Salle |                                                       |
      +-+-+-+-+                    NomFilm                            .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+          
      </pre>
<p class="figure">Figure 12</p>
<p></p>
<p id="rfc.section.3.10.p.3">Code (4 bits): informant le server qu'il s'agit d'une demande d'acc&#232;s &#224; une salle de film. (Voir figure 1) </p>
<p id="rfc.section.3.10.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.10.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p id="rfc.section.3.10.p.6">Temps (32 bits): indiquant au server le temps d'envoi du paquet utilise pour le calcul du temps d'inactivit&#233;.  Celle nouvelle valeur devient la valeur de reference. (Voir 3.3) </p>
<p id="rfc.section.3.10.p.7">Salle (4 bits): contient la salle actuel du client (MainRoom salle=0000) pour l'avertissement des users de la presente salle.  </p>
<p id="rfc.section.3.10.p.8">NomFilm (256 bits): contient le nom du film souhait&#233; par le client. (voir 3.6) </p>
<h1 id="rfc.section.3.11">
<a href="#rfc.section.3.11">3.11.</a> Envoie Message de Chat</h1>
<p id="rfc.section.3.11.p.1">Ce paquet contient les messages courants de discussion dans les salles. Il est transmis par le client au server et retransmis par le server &#224; l'ensemble des clients concern&#233;s</p>
<div id="rfc.figure.13"></div>
<div id="send_msg"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Temps                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IdUser   | Salle |                                         |
      +-+-+-+-+-+-+-+-+-+-+-+      Message                            .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+   
      </pre>
<p class="figure">Figure 13</p>
<p></p>
<p id="rfc.section.3.11.p.3">Code (4 bits): Informant le server qu'il s'agit d'un messagde chat &#224; retransmettre.  Informant le client que c'est un message &#224; afficher (Voir figure 1) </p>
<p id="rfc.section.3.11.p.4">Sequence (12 bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.11.p.5">Taille (16 bits): Taille totale du paquet.  </p>
<p id="rfc.section.3.11.p.6">Temps (32 bits): indiquant au server le temps d'envoi du paquet utilise pour le calcul du temps d'inactivit&#233;.  Celle nouvelle valeur devient la valeur de reference. (Voir 3.3) </p>
<p id="rfc.section.3.11.p.7">IdUser (7 bits): l'identifiant du user &#224; l'origine du message.  </p>
<p id="rfc.section.3.11.p.8">Salle (4 bits): la salle du user &#224; l'origine du message.  </p>
<p></p>

<dl>
<dt>Message (Taille variable)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient un message de chat envoye par un client en destination des clients pr&#233;sents dans la meme salle que lui.  Tous les carat&#232;res UTF-8 doivent etre accepter et la taille du message doit etre variable.  Le client doit envoyer au plus un message par seconde et message s'afficher uniquement chez les clients de la salle de l'emetteur.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.12">
<a href="#rfc.section.3.12">3.12.</a> Quitter la MainRoom</h1>
<p id="rfc.section.3.12.p.1">Ce paquet est transmis par un client au server lorsqu'il souhaite quitter l'application.</p>
<div id="rfc.figure.14"></div>
<div id="quit_MR"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     
      </pre>
<p class="figure">Figure 14</p>
<p></p>
<p id="rfc.section.3.12.p.3">Code (4bits): informant le server que le client souhaite quitter l'application. (Voir figure 1) </p>
<p id="rfc.section.3.12.p.4">Sequence (12bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.12.p.5">Taille (16bits): Taille totale du paquet.  </p>
<h1 id="rfc.section.3.13">
<a href="#rfc.section.3.13">3.13.</a> Quitter un film</h1>
<p id="rfc.section.3.13.p.1">Ce paquet transmis par le client au server lui signifaint qu'il souhaite quitter la salle dans laquelle il se trouve et rejoindre la MainRoom</p>
<div id="rfc.figure.15"></div>
<div id="quit_movie"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                             Temps                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Salle |
      +-+-+-+-+      
      </pre>
<p class="figure">Figure 15</p>
<p></p>
<p id="rfc.section.3.13.p.3">Code (4bits): informant le server qu'il souhaite rejoindre la Main Room. (Voir figure 1) </p>
<p id="rfc.section.3.13.p.4">Sequence (12bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.13.p.5">Taille (16bits): Taille totale du paquet.  </p>
<p id="rfc.section.3.13.p.6">Temps (32 bits): indiquant au server le temps d'envoi du paquet utilise pour le calcul du temps d'inactivite.  Celle nouvelle valeur devient la valeur de reference.  (Voir 3.3)</p>
<p id="rfc.section.3.13.p.7">Salle (4 bits): Le client joint sa localisation au message pour que les clients de cette salle soient avertis de son depart </p>
<h1 id="rfc.section.3.14">
<a href="#rfc.section.3.14">3.14.</a> Message de deconnexion</h1>
<p id="rfc.section.3.14.p.1">Ce message est transmis au client par le server lorsque ce dernier deconnecte volontairement le client de l'application Soit pour inactivit&#233; ou pour un detection de SPAM. </p>
<div id="rfc.figure.16"></div>
<div id="msg_deco"></div>
<pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Code  |        Sequence       |            Taille             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      .                    NotificationDeconnexion                    .                             
      |                                                               |                             
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      </pre>
<p class="figure">Figure 16</p>
<p></p>
<p id="rfc.section.3.14.p.3">Code (4bits): informant le client qu'il s'agit d'un message &#224; afficher. (Voir figure 1) </p>
<p id="rfc.section.3.14.p.4">Sequence (12bits): le numero de sequence du paquet.  </p>
<p id="rfc.section.3.14.p.5">Taille (16bits): Taille totale du paquet.  </p>
<p></p>

<dl>
<dt>NotificationDeconnexion (1024 bits)</dt>
<dd style="margin-left: 8">
<br><br> Ce champ contient un message avertissant le client qu'il a &#233;t&#233; deconnect&#233;. Pour ce message, tous les carat&#232;res UTF-8 doivent etre accepter et le message codes sur 1024 bits.  Le message doit s'afficher parmis les messages de chat mais etre vu uniquement par le client concerne.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Fiabilit&#233;</h1>
<p id="rfc.section.4.p.1">La fiabilite du protocole est assuree par trois principaux elements : Le numero de sequence, l'acquittement et les messages d'erreur.  </p>
<p id="rfc.section.4.p.2">Le type de message acquittement: Ce type de message permet de s'assurer que les utilisateurs ou le serveur ait bien recu le message. Les deux entites attendent de recevoir ce message avant l'emission du prochain message meme message. En effet, en cas de non reception du message d'acquittement, l'emetteur considere que le recepteur n'a pas recu le message et le renvoie. De cette maniere, nous limitons le nombre de renvoi de message dans le systeme. Il est a noter qu'en outre, pour ne pas surcharger le serveur, les clients attendront toutes les secondes pour envoyer un message au serveur.  </p>
<p id="rfc.section.4.p.3">Le numero de sequence : Chaque message de notre service est associe a un numero de sequence, qui permet de l'identifier de maniere unique. De cette maniere, nous pouvons determiner si paquet recu est le bon. Prenons un exemple. Supposons que le client A veut communiquer avec le serveur.  Il lui envoie le paquet de sequence 5, le serveur le recoit et lui envoie un acquittement. Malheureusement, le client ne le recoit pas. Le client renvoie donc le paquet de sequence 5 au serveur. Le serveur ayant deja recu ce paquet, signale une erreur au client en lui envoyant un paquet "Erreur de sequence". Le client A sait donc que le paquet de l'acquittement a ete egare, incremente son compteur de sequence et cesse les reemissions Cela s'averera tres utile dans le cas de la transmission sous le protocole UDP </p>
<p id="rfc.section.4.p.4">Messages d'erreur : Les messages d'erreur envoyes lors de l'execution des taches du serveur permettront de reconnaitre les erreurs produites pas les clients afin de les corriger, sans toutefois avoir &#224; se demander ce qui se passe.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Exemple de scenario</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Scenario 1(sans erreur): Regarder un film</h1>
<p id="rfc.section.5.1.p.1">Dans ce scenario, nous allons expliciter la suite de messages envoyee entre un client et le serveur lorsque l'utilisateur veut regarder un film sur la plateforme. Nous irons de la connexion au service jusqu'a l'acces au film.  </p>
<pre>


                                         (salle=0000)      (salle!=0000) 
                                           MainRoom            MovieRoom
Client A                Serveur            Client B             Client C          
  |                       |                   |                    |
  |      Demande de       |                   |                    |                     
  |      connexion        |                   |                    |
  |----------------------&gt;|                   |                    |
  |  (Le client demande   |                   |                    |
  |  l'acces au service)  |                   |                    |   
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |    Acquittement       |                   |                    |
  |&lt;----------------------|                   |                    |
  |  (Le serveur confirme |                   |                    |   
  |   avoir recu)         |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |  Connexion reussie    |                   |                    |
  |&lt;-------------- -------|                   |                    |
  | (Le serveur connecte  |                   |                    |
  |       le client)      |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |   Envoi liste des     |                   |                    |
  |        films          |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |     Envoi liste   |                    |
  |   Envoi liste des     |  des utilisateurs |                    |
  |     utilisateurs      |------------------&gt;|                    |
  |&lt;----------------------|(le serveur actua- |                    |
  |                       |lise la liste des  |                    |
  |                       | clients connectes)|                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |   Acquittement    |                    |
  |                       |&lt;------------------|                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |  Demande acces film   |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |    Acquittement       |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |                   |                    |
  |    Envoi liste        |                   |                    |
  | des utilisateurs      |                   |                    |
  |&lt;----------------------|                   |                    |
  |     (Utilisateurs     |                   |                    |
  | visionnant le meme    |                   |                    |
  |   film [salle @001])  |  Envoi liste des  |                    |
  |                       |    utilisateurs   |                    |
  |                       |------------------&gt;|                    |
  |                       | (le serveur actua-|                    |
  |                       | lise la liste des |                    |
  |                       | clients connectes)|                    |
  |                       |                   |                    |
  |                       | Envoi liste des   |                    |
  |                       |    utilisateurs   |                    |
  |                       |---------------------------------------&gt;|
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |   Acquittement    |                    |
  |                       |&lt;------------------|                    |
  |                       |                   |                    |
  |                       |                   |  Acquittement      |
  |                       |                   |&lt;-------------------|
  |                       |                   |                    |



    </pre>
<p></p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Scenario 2(sans erreur): Chat dans une salle</h1>
<p id="rfc.section.5.2.p.1">Ce scenario decrit la suite de message envoyes dans le cas d'un envoi de messages dans une meme salle.  </p>
<pre>


(salle=1000)                            (salle=1000)        (salle=1000) 
MovieRoom                                 MainRoom            MovieRoom
Client A                Serveur           Client B             Client C          
  |                       |                   |                    |
  |      Envoi de         |                   |                    |                     
  |  message : "salut!"   |                   |                    |
  |----------------------&gt;|                   |                    |
  |  (Le client envoie    |                   |                    |
  | un message dans la    |                   |                    |
  |       salle)          |                   |                    |   
  |                       |                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |    Acquittement       |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |                   |                    | 
  |                       |     Envoi de      |                    |
  |                       | message : "salut!"|                    |
  |                       |------------------&gt;|                    |
  |                       |                   |                    |
  |                       |     Envoi de      |                    |
  |                       | message : "salut!"|                    |
  |                       |---------------------------------------&gt;|
  |      Envoi de         |                   |                    |                     
  |  message : "salut!"   |                   |                    |
  |&lt;----------------------|                   |                    |
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |   Acquittement    |                    |
  |                       |&lt;------------------|                    |
  |                       |                   |                    |
  |                       |                   |  Acquittement      |
  |                       |                   |&lt;-------------------|

    </pre>
<p></p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Scenario 3(sans erreur): Utilisateur inactif Dans la salle principale</h1>
<p id="rfc.section.5.3.p.1">Ce scenario decrit la suite de messages envoyes dans le cas ou un utilisateur est inactif dans la salle principale.  </p>
<pre>

                                                        (salle=0000) 
                                                          MainRoom 
Client A                                Serveur           Client B
  | =====  Processus de connexion  =====   |                 |
  | =====     (cf. Scenario 1)     =====   |                 |
  | ==   (Temps d'inaction = 0 mn)   ==    |                 |
  .                                        .                 .
  .                                        .                 .
  | ==   (Temps d'inaction = 14 mn)   ==   |                 |
  |                                        |                 |
  |       Avertissement Inactivite         |                 |
  |&lt;---------------------------------------|                 |
  |  (Le serveur previent l'utilisateur)   |                 |
  |                                        |                 |
  |             Acquittement               |                 |
  |---------------------------------------&gt;|                 |
  .                                        .                 .
  | ==   (Temps d'inaction = 15 mn)   ==   |                 |
  |                                        |                 |
  |        Message de deconnexion          |                 |
  |&lt;---------------------------------------|                 |
  |                                        | Envoi liste des |
  |                                        |  utilisateurs   |
  |                                        |----------------&gt;|
  |             Acquittement               |                 |
  |---------------------------------------&gt;|                 |
  |                                        |                 |
  |                                        |   Acquittement  | 
  |                                        |&lt;----------------|
  |                                        |                 |
    </pre>
<p></p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> Scenario 4(sans erreur): Envoie de SPAM</h1>
<p id="rfc.section.5.4.p.1">Ce scenario decrit l'ensemble des messages echanges lorsque l'utilisateur envoie des messages a repetition dans le chat dans le but de nuire (SPAM). Le serveur va donc le deconnecter.  </p>
<pre>
    
(salle=1000)                            (salle=1000)        (salle=1000) 
MovieRoom                                 MainRoom            MovieRoom
Client A                Serveur           Client B             Client C          
  |                       |                   |                    |
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM!"    |                   |                    |
  |----------------------&gt;|                   |                    |
  |  (Le client envoie    |                   |                    |
  | un message dans la    |                   |                    |
  |       salle)          |                   |                    |   
  |                       |                   |                    |
  |     Acquittement      |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |     Envoi de      |                    |
  |                       | message : "SPAM!" |                    |
  |                       |------------------&gt;|                    |
  |                       |                   |                    |
  |                       |     Envoi de      |                    |
  |                       | message : "SPAM!" |                    |
  |                       |---------------------------------------&gt;|
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM"     |                   |                    |
  |&lt;----------------------|                   |                    |
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |   Acquittement    |                    |
  |                       |&lt;------------------|                    |
  |                       |                   |                    |
  |                       |                   |  Acquittement      |
  |                       |                   |&lt;-------------------|
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM!"    |                   |                    |
  |----------------------&gt;|                   |                    |
  |     Acquittement      |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |     Envoi de      |                    |
  |                       | message : "SPAM!" |                    |
  |                       |------------------&gt;|                    |
  |                       |                   |                    |
  |                       |     Envoi de      |                    |
  |                       | message : "SPAM!" |                    |
  |                       |---------------------------------------&gt;|
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM"     |                   |                    |
  |&lt;----------------------|                   |                    |
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |   Acquittement    |                    |
  |                       |&lt;------------------|                    |
  |                       |                   |                    |
  |                       |                   |  Acquittement      |
  |                       |                   |&lt;-------------------|
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM!"    |                   |                    |
  |----------------------&gt;|                   |                    |
  .                       .                   .                    .
  .                       .                   .                    .
  .                       .                   .                    .
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM!"    |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |                   |                    |
  |     Acquittement      |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |                   |                    |
  |   Avertissement SPAM  |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |                   |                    |
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |                   |                    |
  |                       |                   |                    |
  |      Envoi de         |                   |                    |                     
  |  message : "SPAM!"    |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |                   |                    |
  |     Acquittement      |                   |                    |
  |&lt;----------------------|                   |                    |
  |                       |                   |                    |
  |      Message de       |                   |                    |
  |     deconnexion       |                   |                    |
  |&lt;----------------------|                   |                    |
  | ("Vous allez etre     |                   |                    |
  |   deconnecte pour     |                   |                    |
  |       SPAM")          |  Envoi liste des  |                    |
  |                       |   utilisateurs    |                    |
  |                       |------------------&gt;|                    |
  |                       |                   |                    |
  |                       |  Envoi liste des  |                    |
  |                       |   utilisateurs    |                    |
  |                       |---------------------------------------&gt;|
  |    Acquittement       |                   |                    |
  |----------------------&gt;|                   |                    |
  |                       |   Acquittement    |                    |
  |                       |&lt;------------------|                    |
  |                       |                   |                    |
  |                       |                   |  Acquittement      |
  |                       |                   |&lt;-------------------|



    </pre>
<p></p>
<h1 id="rfc.section.5.5">
<a href="#rfc.section.5.5">5.5.</a> Scenario 5(avec erreur) : Quitter l'application</h1>
<p id="rfc.section.5.5.p.1">Dans ce scenario, nous allons simuler la suite de messages envoyes lorsque l'utilisateur veut quitter l'application. Cependant, nous ajouterons quelques erreurs qui peuvent arriver dans notre systeme et nous montrerons comment nous comptons les gerer.  Sur la figure Seq designera le numero de sequence.  </p>
<pre>

Client A                                       Serveur
  |                                               |
  |       Quitter un salon de film (Seq = 6)      |
  |-----------------------x                       |
  |                                               |
  |       Quitter un salon de film (Seq = 6)      |
  |----------------------------------------------&gt;|
  | (Le client, n'ayant pas recu l'acquittement   |
  |  attend 2 secondes et renvoie le meme message |
  | avec le meme numero de sequence au serveur)   |
  |                                               |
  |               Acquittement                    |
  |                   x---------------------------|
  |     L'acquittement n'a pas atteint le         |
  |                   client)                     |
  |                                               |
  |       Quitter un salon de film  (Seq = 6)     |
  |----------------------------------------------&gt;|
  | (Le client, n'ayant pas recu l'acquittement   |
  |  encore une fois attend 2 secondes et         |
  |            renvoie le meme message            |
  | avec le meme numero de sequence au serveur)   |
  |                                               |
  |               Erreur de sequence              |
  |&lt;----------------------------------------------|
  |  (Le serveur signale au client qu'il a deja   |
  |   recu cette sequence, lui signalant ainsi    | 
  |      la reception du message precedent.      
  |    Le numero de sequence attendu etant        |
  |                le numero 7)                   |
  |                                               |
  |              Acquittement   (Seq = 7)         |
  |----------------------------------------------&gt;|
  |         ==== Deconnexion du client ====       |


    </pre>
<p></p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Conclusion</h1>
<p id="rfc.section.6.p.1">Chat While Watching est une application offrant aux utilisateurs un service de chat lorsque ceux-ci selectionnent le film qu'ils veulent regarder ou encore pendant le visionnage. En suivant le protocole enonce dans ce document, nous pensons que l'application peut garantir ce service de chat tout en gardant un certain confort et une bonne fiabilite.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Claude KADJO MAMI</span> 
	  <span class="n hidden">
		<span class="family-name">KADJO MAMI</span>
	  </span>
	</span>
	<span class="org vcardline">Telecom Bretagne</span>
	<span class="adr">
	  <span class="vcardline">655, Avenue du Technopole</span>

	  <span class="vcardline">
		<span class="locality">Brest</span>,  
		<span class="region">Bretagne</span> 
		<span class="code">29280</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:claude-yrvine-axel.kadjo-mami@imt-atlantique.net">claude-yrvine-axel.kadjo-mami@imt-atlantique.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Eric Xavier N'GUESSAN</span> 
	  <span class="n hidden">
		<span class="family-name">N'GUESSAN</span>
	  </span>
	</span>
	<span class="org vcardline">Telecom Bretagne</span>
	<span class="adr">
	  <span class="vcardline">655, Avenue du Technopole</span>

	  <span class="vcardline">
		<span class="locality">Brest</span>,  
		<span class="region">Bretagne</span> 
		<span class="code">29280</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:eric-xavier.nguessan@imt-atlantique.net">eric-xavier.nguessan@imt-atlantique.net</a></span>

  </address>
</div>

</body>
</html>
